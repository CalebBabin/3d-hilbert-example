{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/main.js","webpack:///./src/util/hilbert.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","hilbert","container","camera","scene","raycaster","renderer","INTERSECTED","blocks","mouse","THREE","Vector2","GRID_SIZE","GRID_DIVISIONS","GRID_POW","Math","pow","radius","theta","frustumSize","onWindowResize","aspect","window","innerWidth","innerHeight","left","right","top","bottom","updateProjectionMatrix","setSize","onDocumentMouseMove","event","preventDefault","x","clientX","y","clientY","animate","requestAnimationFrame","ts","min","max","Date","now","lastFrame","position","sin","degToRad","z","cos","lookAt","updateMatrixWorld","setFromCamera","intersects","intersectObjects","length","material","emissive","setHex","currentHex","getHex","render","addEventListener","document","body","OrthographicCamera","Scene","background","Color","light","DirectionalLight","set","normalize","add","gridHelper","GridHelper","geometry","BoxBufferGeometry","Mesh","MeshLambertMaterial","color","dToXY","scale","push","Raycaster","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","appendChild","domElement","init","rot","xy","rx","ry","shift","xyToD"],"mappings":"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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","const hilbert = require('./util/hilbert.js');\r\n\r\nlet container;\r\nlet camera, scene, raycaster, renderer, blocks = [];\r\nlet mouse = new THREE.Vector2(), INTERSECTED;\r\n\r\nconst GRID_SIZE = 32;\r\nconst GRID_DIVISIONS = GRID_SIZE/4;\r\nconst GRID_POW = Math.pow(GRID_SIZE, 2);\r\n\r\nlet radius = GRID_SIZE*2, theta = 0;\r\nlet frustumSize = GRID_SIZE*1.25;\r\n\r\nwindow.addEventListener('DOMContentLoaded', ()=>{\r\n    init();\r\n    animate();\r\n});\r\n\r\nfunction init() {\r\n    container = document.body;\r\n\r\n    const aspect = window.innerWidth / window.innerHeight;\r\n\r\n    camera = new THREE.OrthographicCamera( frustumSize * aspect / - 2, frustumSize * aspect / 2, frustumSize / 2, frustumSize / - 2, 1, 1000 );\r\n\r\n    scene = new THREE.Scene();\r\n\r\n    scene.background = new THREE.Color( 0xf0f0f0 );\r\n\r\n    const light = new THREE.DirectionalLight( 0xffffff, 1 );\r\n    light.position.set( 0.5, 1, 0.5 ).normalize();\r\n    scene.add( light );\r\n\r\n    const gridHelper = new THREE.GridHelper( GRID_SIZE, GRID_DIVISIONS );\r\n    scene.add( gridHelper );\r\n\r\n    const geometry = new THREE.BoxBufferGeometry( 1, 1, 1 );\r\n    for (let i = 0; i < GRID_POW; i++) {\r\n\r\n        const object = new THREE.Mesh( geometry, new THREE.MeshLambertMaterial( { color: new THREE.Color(`hsl(${(i/GRID_POW)*360}, 100%, 50%)`) } ) );\r\n        const position = hilbert.dToXY(i);\r\n\r\n        object.position.x = position[0] - GRID_SIZE/2 + 0.5;\r\n        object.position.y = 0;\r\n        object.position.z = position[1] - GRID_SIZE/2 + 0.5;\r\n\r\n        //object.rotation.x = Math.random() * 2 * Math.PI;\r\n        //object.rotation.y = Math.random() * 2 * Math.PI;\r\n        //object.rotation.z = Math.random() * 2 * Math.PI;\r\n        object.scale.y = (i/GRID_POW)*(GRID_SIZE/5) + 1;\r\n\r\n        scene.add( object );\r\n        blocks.push(object);\r\n    }\r\n\r\n    raycaster = new THREE.Raycaster();\r\n\r\n    renderer = new THREE.WebGLRenderer({\r\n        antialias: true\r\n    });\r\n    renderer.setPixelRatio( window.devicePixelRatio );\r\n    renderer.setSize( window.innerWidth, window.innerHeight );\r\n\r\n    container.appendChild( renderer.domElement );\r\n\r\n    document.addEventListener( 'mousemove', onDocumentMouseMove, false );\r\n\r\n    window.addEventListener( 'resize', onWindowResize, false );\r\n}\r\nfunction onWindowResize() {\r\n    let aspect = window.innerWidth / window.innerHeight;\r\n    camera.left = - frustumSize * aspect / 2;\r\n    camera.right = frustumSize * aspect / 2;\r\n    camera.top = frustumSize / 2;\r\n    camera.bottom = - frustumSize / 2;\r\n    camera.updateProjectionMatrix();\r\n    renderer.setSize( window.innerWidth, window.innerHeight );\r\n}\r\nfunction onDocumentMouseMove( event ) {\r\n    event.preventDefault();\r\n    mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;\r\n    mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;\r\n}\r\n//\r\nfunction animate() {\r\n    requestAnimationFrame( animate );\r\n    render();\r\n}\r\n\r\nlet lastFrame = Date.now();\r\nfunction render() {\r\n    const ts = Math.min(1, Math.max(1, Date.now() - lastFrame)/1000);\r\n    lastFrame = Date.now();\r\n    theta += 5*ts;\r\n    camera.position.x = radius * Math.sin( THREE.Math.degToRad( theta ) );\r\n    camera.position.y = radius * Math.sin( THREE.Math.degToRad( 90 ) );\r\n    camera.position.z = radius * Math.cos( THREE.Math.degToRad( theta ) );\r\n    camera.lookAt( scene.position );\r\n    camera.updateMatrixWorld();\r\n    // find intersections\r\n\r\n    raycaster.setFromCamera( mouse, camera );\r\n    let intersects = raycaster.intersectObjects( blocks );\r\n    if ( intersects.length > 0 ) {\r\n        if ( INTERSECTED != intersects[ 0 ].object ) {\r\n            if ( INTERSECTED ) INTERSECTED.material.emissive.setHex( INTERSECTED.currentHex );\r\n            INTERSECTED = intersects[ 0 ].object;\r\n            INTERSECTED.currentHex = INTERSECTED.material.emissive.getHex();\r\n            INTERSECTED.material.emissive.setHex( 0xff0000 );\r\n        }\r\n    } else {\r\n        if ( INTERSECTED ) INTERSECTED.material.emissive.setHex( INTERSECTED.currentHex );\r\n        INTERSECTED = null;\r\n    }\r\n\r\n    renderer.render( scene, camera );\r\n}\r\n","const rot = (n, xy, rx, ry) => {\r\n    if (ry == 0) {\r\n        if (rx == 1) {\r\n            xy[0] = (n - 1 - xy[0]);\r\n            xy[1] = (n - 1 - xy[1]);\r\n        }\r\n\r\n        //Swap x and y\r\n        xy.push(xy.shift());\r\n    }\r\n}\r\n\r\n// Note: this function will start breaking down for n > 2^26 (MAX_SAFE_INTEGER = 2^5 3)\r\n// x,y: cell coordinates, n: sqrt of num cells (square side size)\r\nconst point2Distance = (x, y, n = 65536) => {\r\n    let rx, ry, d = 0,\r\n        xy = [x, y];\r\n\r\n    for (let s = n / 2; s >= 1; s /= 2) {\r\n        rx = (xy[0] & s) > 0;\r\n        ry = (xy[1] & s) > 0;\r\n        d += s * s * ((3 * rx) ^ ry);\r\n        rot(s, xy, rx, ry);\r\n    }\r\n    return d;\r\n}\r\n\r\n// d: distance, n: sqrt of num cells (square side size)\r\nconst distance2Point = (d, n = 65536) => {\r\n    let rx, ry, t = d,\r\n        xy = [0, 0];\r\n\r\n    for (let s = 1; s < n; s *= 2) {\r\n        rx = 1 & (t / 2);\r\n        ry = 1 & (t ^ rx);\r\n        rot(s, xy, rx, ry);\r\n\r\n        xy[0] += (s * rx);\r\n        xy[1] += (s * ry);\r\n        t /= 4;\r\n    }\r\n    return xy;\r\n}\r\n\r\nmodule.exports = {\r\n    dToXY: distance2Point,\r\n    xyToD: point2Distance,\r\n}"],"sourceRoot":""}